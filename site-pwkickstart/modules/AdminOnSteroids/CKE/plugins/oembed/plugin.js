!function(){CKEDITOR.plugins.add("oembed",{icons:"oembed",hidpi:!0,requires:"widget,dialog",lang:"en",version:1.17,init:function(e){function t(){"undefined"==typeof jQuery?CKEDITOR.scriptLoader.load("//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js",function(){jQuery.noConflict(),"undefined"==typeof jQuery.fn.oembed&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(CKEDITOR.plugins.getPath("oembed")+"libs/jquery.oembed.min.js"))}):"undefined"==typeof jQuery.fn.oembed&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(CKEDITOR.plugins.getPath("oembed")+"libs/jquery.oembed.min.js"))}function n(t,n,i,a,d,l,o,m){jQuery("body").oembed(t,{onEmbed:function(n){var d=!1,s=jQuery.fn.oembed.getOEmbedProvider(t);m.element.data("resizeType",l),"responsive"!=l&&"custom"!=l||(m.element.data("maxWidth",i),m.element.data("maxHeight",a)),m.element.data("align",o),"center"==o?(m.inline||m.element.setStyle("text-align","center"),m.element.removeStyle("float")):(m.inline||m.element.removeStyle("text-align"),"none"==o?m.element.removeStyle("float"):m.element.setStyle("float",o)),"string"==typeof n.code?(m.element.$.firstChild&&m.element.$.removeChild(m.element.$.firstChild),m.element.appendHtml(n.code),m.element.data("oembed",t),m.element.data("oembed_provider",s.name),m.element.addClass("oembed-provider-"+s.name),d=!0):"string"==typeof n.code[0].outerHTML?(m.element.$.firstChild&&m.element.$.removeChild(m.element.$.firstChild),m.element.appendHtml(n.code[0].outerHTML),m.element.data("oembed",t),m.element.data("oembed_provider",s.name),m.element.addClass("oembed-provider-"+s.name),d=!0):alert(e.lang.oembed.noEmbedCode)},onError:function(t){t.indexOf("vimeo.com")>0?alert(e.lang.oembed.noVimeo):alert(e.lang.oembed.Error)},maxHeight:a,maxWidth:i,useResponsiveResize:d,embedMethod:"editor"})}t(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{oEmbed:function(t,i,a,d){function l(){null!=i&&"undefined"!=i||(i=null),null!=a&&"undefined"!=a||(a=null),null!=d&&"undefined"!=d||(d=!1),n(t,e,!1,i,a,d)}return t.length<1||t.indexOf("http")<0?(alert(e.lang.oembed.invalidUrl),!1):("undefined"==typeof jQuery.fn.oembed?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(CKEDITOR.plugins.getPath("oembed")+"libs/jquery.oembed.min.js"),function(){l()}):l(),!0)}}),e.widgets.add("oembed",{draggable:!1,mask:!0,dialog:"oembed",allowedContent:{div:{styles:"text-align,float",attributes:"*",classes:null!=e.config.oembed_WrapperClass?e.config.oembed_WrapperClass:"embeddedContent"},"div(embeddedContent,oembed-provider-*) iframe":{attributes:"*"},"div(embeddedContent,oembed-provider-*) blockquote":{attributes:"*"},"div(embeddedContent,oembed-provider-*) script":{attributes:"*"}},template:'<div class="'+(null!=e.config.oembed_WrapperClass?e.config.oembed_WrapperClass:"embeddedContent")+'"></div>',upcast:function(t){return"div"==t.name&&t.hasClass(null!=e.config.oembed_WrapperClass?e.config.oembed_WrapperClass:"embeddedContent")},init:function(){var e={oembed:this.element.data("oembed")||"",resizeType:this.element.data("resizeType")||"noresize",maxWidth:this.element.data("maxWidth")||560,maxHeight:this.element.data("maxHeight")||315,align:this.element.data("align")||"none",oembed_provider:this.element.data("oembed_provider")||""};this.setData(e),this.element.addClass("oembed-provider-"+e.oembed_provider),this.on("dialog",function(e){e.data.widget=this},this)}}),e.ui.addButton("oembed",{label:e.lang.oembed.button,command:"oembed",toolbar:"insert,10",icon:this.path+"icons/"+(CKEDITOR.env.hidpi?"hidpi/":"")+"oembed.png"});var i=function(){var e=this.getDialog(),t=this.getValue(),n=e.getContentElement("general","maxSizeBox").getElement(),i=e.getContentElement("general","sizeBox").getElement();"noresize"==t?(n.hide(),i.hide()):"custom"==t?(n.hide(),i.show()):(n.show(),i.hide())};String.prototype.beginsWith=function(e){return 0===this.indexOf(e)},CKEDITOR.dialog.add("oembed",function(e){return{title:e.lang.oembed.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?568:550,minHeight:155,onShow:function(){var e={oembed:this.widget.element.data("oembed")||"",resizeType:this.widget.element.data("resizeType")||"noresize",maxWidth:this.widget.element.data("maxWidth"),maxHeight:this.widget.element.data("maxHeight"),align:this.widget.element.data("align")||"none"};this.widget.setData(e),this.getContentElement("general","resizeType").setValue(e.resizeType),this.getContentElement("general","align").setValue(e.align);var t=this.getContentElement("general","resizeType").getValue(),n=this.getContentElement("general","maxSizeBox").getElement(),i=this.getContentElement("general","sizeBox").getElement();"noresize"==t?(n.hide(),i.hide()):"custom"==t?(n.hide(),i.show()):(n.show(),i.hide())},onOk:function(){},contents:[{label:e.lang.common.generalTab,id:"general",elements:[{type:"html",id:"oembedHeader",html:'<div style="white-space:normal;width:500px;padding-bottom:10px">'+e.lang.oembed.pasteUrl+"</div>"},{type:"text",id:"embedCode",focus:function(){this.getElement().focus()},label:e.lang.oembed.url,title:e.lang.oembed.pasteUrl,setup:function(e){e.data.oembed&&this.setValue(e.data.oembed)},commit:function(t){var i=CKEDITOR.dialog.getCurrent(),a=i.getValueOf("general","embedCode").replace(/\s/g,""),d=i.getContentElement("general","resizeType").getValue(),l=i.getContentElement("general","align").getValue(),o=null,m=null,s=!1,r=i.getParentEditor();return a.length<1||a.indexOf("http")<0?(alert(e.lang.oembed.invalidUrl),!1):("noresize"==d?(s=!1,o=null,m=null):"responsive"==d?(o=i.getContentElement("general","maxWidth").getInputElement().getValue(),m=i.getContentElement("general","maxHeight").getInputElement().getValue(),s=!0):"custom"==d&&(o=i.getContentElement("general","width").getInputElement().getValue(),m=i.getContentElement("general","height").getInputElement().getValue(),s=!1),n(a,r,o,m,s,d,l,t),t.setData("oembed",a),t.setData("resizeType",d),t.setData("align",l),t.setData("maxWidth",o),void t.setData("maxHeight",m))}},{type:"hbox",widths:["50%","50%"],children:[{id:"resizeType",type:"select",label:e.lang.oembed.resizeType,"default":"noresize",setup:function(e){e.data.resizeType&&this.setValue(e.data.resizeType)},items:[[e.lang.oembed.noresize,"noresize"],[e.lang.oembed.responsive,"responsive"],[e.lang.oembed.custom,"custom"]],onChange:i},{type:"hbox",id:"maxSizeBox",widths:["120px","120px"],style:"float:left;position:absolute;left:58%;width:200px",children:[{type:"text",width:"100px",id:"maxWidth","default":null!=e.config.oembed_maxWidth?e.config.oembed_maxWidth:"560",label:e.lang.oembed.maxWidth,title:e.lang.oembed.maxWidthTitle,setup:function(e){e.data.maxWidth&&this.setValue(e.data.maxWidth)}},{type:"text",id:"maxHeight",width:"120px","default":null!=e.config.oembed_maxHeight?e.config.oembed_maxHeight:"315",label:e.lang.oembed.maxHeight,title:e.lang.oembed.maxHeightTitle,setup:function(e){e.data.maxHeight&&this.setValue(e.data.maxHeight)}}]},{type:"hbox",id:"sizeBox",widths:["120px","120px"],style:"float:left;position:absolute;left:58%;width:200px",children:[{type:"text",id:"width",width:"100px","default":null!=e.config.oembed_maxWidth?e.config.oembed_maxWidth:"560",label:e.lang.oembed.width,title:e.lang.oembed.widthTitle,setup:function(e){e.data.maxWidth&&this.setValue(e.data.maxWidth)}},{type:"text",id:"height",width:"120px","default":null!=e.config.oembed_maxHeight?e.config.oembed_maxHeight:"315",label:e.lang.oembed.height,title:e.lang.oembed.heightTitle,setup:function(e){e.data.maxHeight&&this.setValue(e.data.maxHeight)}}]}]},{type:"hbox",id:"alignment",children:[{id:"align",type:"radio",items:[[e.lang.oembed.none,"none"],[e.lang.common.alignLeft,"left"],[e.lang.common.alignCenter,"center"],[e.lang.common.alignRight,"right"]],label:e.lang.common.align,setup:function(e){this.setValue(e.data.align)}}]}]}]}})}})}();